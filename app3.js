let arr = [
  {
    name: "Malchite Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAXUrBZrk98p9eGbdSSjVDcrbJlVXi_k6LvIy34POfNMEbYbPCm9BTXstKFS7YFgQZ-is&usqp=CAU",
    price: 45000,
    del_price: 50000,
  },
  {
    name: "amarold Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSM71OSt3PmOU4f0xDzXq3uBEM-cpWOLqKr58F40RgsIeOKgS4IkCKQztpocsPhPwafmjc&usqp=CAU",
    price: 190000,
    del_price: 200000,
  },
  {
    name: "Celistite Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSM71OSt3PmOU4lf0xDzXq3uBEM-cpWOLqKr58F40RgsIeOKgS4IkCKQztpocsPhPwafmjc&usqp=CAU",
    price: 40000,
    del_price: 50000,
  },
  {
    name: "carnelian Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSc62ywpfs_56zmR84xPMOaDpReMv1RDUX_w3h6rIVviF1vvTmWqbzzUrSvdsNsjA5IbGs&usqp=CAU",
    price: 4000,
    del_price: 5000,
  },
  {
    name: "Apatite Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRAzopYdUP0gw7YZESOgFydov3sZTzC3B54tDsYJ0oupdi_Q1Z1N_LKDHuBYo4pP0pPQow&usqp=CAU",
    price: 5500,
    del_price: 6500,
  },
  {
    name: "Andalusite Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQDHnozA5Hyiq_FFNNx2l539flU0SlWcjcFquxO4JZzpV6_VuzSUJDw0jlVUrHn8iwOOdg&usqp=CAU",
    price: 40000,
    del_price: 50000,
  },
  {
    name: "amertine Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSP3o0y0i5j1SfRx7vGfEZMcKC37YWVKs3KtVG-K3v479U0NaLOn893wTj0zZs5bZd--qc&usqp=CAU",
    price: 70000,
    del_price: 80000,
  },
  {
    name: "amber Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSuO_UC2ZbsdJ6oQD4fDkf-_P2U6SsaKUZtXmxUv1FTTwEj3GCuy_rDeyzrT5auHu3P1CU&usqp=CAU",
    price: 90000,
    del_price: 100000,
  },
  {
    name: "jade Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQHnitzbHg3c6daK7Q2h8iKly65v1Qy0Dbh2UIHa84K-N4RXpNPmGYNAecChowLWraer0c&usqp=CAU",
    price: 15000,
    del_price: 20000,
  },
  {
    name: "florite Stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7HsdBBA3ZdhuAtTcs-_H_bg-J0Un1M-eH_yh09cOYood39sjJOZrXrCkIPNgoMk7uG4Q&usqp=CAU",
    price: 50000,
    del_price: 46000,
  },
  {
    name: "amazonite stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpLpKgVhnlkd5DTJMI_MwzegqBPbLH5o8K-VdpigC5bb2k-JxlvOSC61K4IYUBnFwvikY&usqp=CAU",
    price: 43000,
    del_price: 46000,
  },
  {
    name: "alexender stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRv7dkbq9AldwTXaIyDDH3HIvju0GG0VRpekkJfC9mD33gQe78BvC_qDpe2seJ6jvcrm5w&usqp=CAU",
    price: 87999,
    del_price: 80999,
  },
  {
    name: "admit stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTc-b9E5fk4F-M3cWpVCJNHQ-kAROYPB_KnJ4Dj-WRgIZrJAE9Kd7joU8dT-LttVCvlL78&usqp=CAU",
    price: 12000,
    del_price: 10000,
  },
  {
    name: "garnet stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQiWgf-AeGI1UsBSWZKz39xsHDdXUpQwll6-MsNjpUEtL4cHtielIqIRLxkmZwCBwy9zpk&usqp=CAU",
    price: 30000,
    del_price: 33000,
  },
  {
    name: "amythist stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRwkLQXOWOxrSd9VhaUxq149k_VdHyt7XxyS1GCKRip9FsIU-X7aW0hQM2Sc30_McpACfs&usqp=CAU",
    price: 40000,
    del_price: 45000,
  },
  {
    name: "agate stone",
    image:
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQzHZlWaAuUpYGfoBe1lX844Rd9gSfCB8h56S-NDR4znCg-QYoOk0UGo6v3ID8cDKUFekY&usqp=CAU",
    price: 2200,
    del_price: 3000,
  },
];
function displayCards() {
  let str = "";
  arr.forEach(function (data, index) {
    str += `
        <div style="padding: 10px 5px;" class="box mb-2">
        <img
          src="${data.image}"
          alt="${data.name}"
        />
        <h1>
        ${data.name}
        </h1>
        <p>
          Lorem ipsum dolor sit amet <br />
          consectetur adipisicing elit. <br />
          Voluptatum, voluptates?
        </p>
        <p class="text-info"><del>Price ${data.del_price}</del> &nbsp; ${
      data.price
    }</p>
        
        <button  onclick='addToCart(${JSON.stringify(data.name)}, ${
      data.price
    }, 1)' class="btn btn-light" >Buy Now</button>
      </div>
      `;
  });
  document.querySelector(".card").innerHTML = str;
}
displayCards();

// add to cart

let cart = [];
let total = 0;

function addToCart(name, price, qty) {
  cart = JSON.parse(localStorage.getItem("cart"));
  total = JSON.parse(localStorage.getItem("total"));
  if (cart === null || total === null) {
    cart = [];
    total = 0;
  }

  let existingItems = cart.find((data) => data.name == name);
  if (existingItems) {
    existingItems.qty++;
    total += existingItems.price;
    localStorage.setItem("cart", JSON.stringify(cart));
    localStorage.setItem("total", total);
  } else {
    cart.push({ name: name, price: price, qty: qty });
    total = total + price;
    localStorage.setItem("cart", JSON.stringify(cart));
    localStorage.setItem("total", total);
  }

  updateCart();
  // alert('hello word')
}

function updateCart() {
  cart = JSON.parse(localStorage.getItem("cart"));
  total = JSON.parse(localStorage.getItem("total"));
  if (cart === null || total === null) {
    cart = [];
    total = 0;
  }
  if (cart.length > 0) {
    document.querySelector("#clearcart").style.display = "inline";
    document.querySelector("#bn").style.display = "inline";
  } else {
    document.querySelector("#clearcart").style.display = "none";
    document.querySelector("#bn").style.display = "none";
  }
  document.getElementById("cartlength").innerHTML = cart.length;
  document.getElementById("cartlengths").innerHTML = cart.length;

  let str1 = "";
  cart.forEach(function (data, index) {
    str1 =
      str1 +
      `
              <li class="d-flex justify-content-between mb-3">${data.name} | ${data.price}<div> <button onclick='increment(${index}, ${data.qty}, ${data.price})' class="btn btn-secondary">+</button> ${data.qty} <button onclick='decrement(${index}, ${data.qty}, ${data.price})' class="btn btn-secondary">-</button></div></li>
              `;
  });
  document.querySelector("#listitems").innerHTML = str1;
  document.querySelector("#total_listitems").innerHTML = total;
}

updateCart();

function increment(index, qty, price) {
  cart = JSON.parse(localStorage.getItem("cart"));
  total = JSON.parse(localStorage.getItem("total"));
  cart[index].qty++;
  total += price;
  localStorage.setItem("cart", JSON.stringify(cart));
  localStorage.setItem("total", total);
  updateCart();
}

function decrement(index, qty, price) {
  cart = JSON.parse(localStorage.getItem("cart"));
  total = JSON.parse(localStorage.getItem("total"));
  if (cart[index].qty == 1) {
    cart.splice(index, 1);
    total -= price;
    localStorage.setItem("cart", JSON.stringify(cart));
    localStorage.setItem("total", total);
    updateCart();
  } else {
    cart[index].qty--;
    total -= price;
    localStorage.setItem("cart", JSON.stringify(cart));
    localStorage.setItem("total", total);
    updateCart();
  }
}

function clearCart() {
  localStorage.removeItem("cart");
  localStorage.removeItem("total");
  updateCart();
}
